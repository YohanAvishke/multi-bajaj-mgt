import requests
import json
import time

url = "https://erp.dpg.lk/PADEALER/PADLRItemInquiry/Inquire"

headers = {
    'authority': 'erp.dpg.lk',
    'sec-ch-ua': '"Google Chrome";v="89", "Chromium";v="89", ";Not A Brand";v="99"',
    'accept': '*/*',
    'x-requested-with': 'XMLHttpRequest',
    'sec-ch-ua-mobile': '?0',
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 11_2_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/'
                  '89.0.4389.114 Safari/537.36',
    'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',
    'origin': 'https://erp.dpg.lk',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-mode': 'cors',
    'sec-fetch-dest': 'empty',
    'referer': 'https://erp.dpg.lk/Application/Home/PADEALER',
    'accept-language': 'en-US,en;q=0.9',
    'cookie': '.AspNetCore.Session=CfDJ8N8gIs%2FXx8JIrXltjeQ28vFI9s%2F8wmJ643e2fNePr7we7AemM0wbkub3WyXT2IYsn3sIOP%2F02eKCF8toZlaCtGxu%2FV9Yop4w9B90m%2BpCaUBQ2vt4zBZwljqEqMx7Otspc8QL%2FixZTN5Y1v4hkztinn0PCzQ8bwr3wLI8tMPW4g8h; .AspNetCore.Antiforgery.mEZFPqlrlZ8=CfDJ8N8gIs_Xx8JIrXltjeQ28vHKrxQ5gC2_4GrCt0RQDQmTVay0r_yc8Vsp1Pqx4kmdA1Cv6mpPE3SsC6NZZ96XZvoj4iRafCp2Nz_RJDrDUYG5oUKZckaDPTuVIJI0d2otNskc_muerV7Rb7O5Hy7aRb8'
}

numbers = [
'DE191009',
'YPD15001',
'YDZ05005',
'JK161001',
'SVA0022R',
'SVA0005',
'SVA0022G',
'BGO20W50C',
'BGO10W30C',
'JD511010',
'AA131024',
'AA191064',
'DU101073',
'DU101218',
'AA101162',
'52210040',
'AL201051',
'AE121001',
'24160924',
'35101059',
'DX191001',
'JL401005',
'DS101277',
'DD101407',
'AL201066',
'06100702',
'03100620',
'DL191012',
'AN101123',
'36AN0010',
'AA101046',
'AA101054',
'AA101666',
'AF111010',
'DJ101369',
'JN521001',
'24130105',
'24151266',
'24171118',
'AA101392',
'AA111058',
'AN101012',
'22131018',
'30101096',
'35161060',
'36JZ0103',
'52DH1357',
'DD101492',
'DD191142',
'DF161425',
'DH101195',
'DH101862',
'DJ151067',
'DJ191059',
'DJ201183',
'DJ201206',
'DJ201207',
'DS191054',
'DT171814',
'JD511201',
'JE351200',
'JF401400',
'JL161200',
'JZ113001',
'PD402005',
'PD551433',
'PF351206',
'24131016',
'30151105',
'31101020',
'31151060',
'DJ151071',
'36DS1201',
'36DU1205',
'36JK0011',
'DD101063',
'DF181091',
'DF181092',
'DM191020',
'DU121005',
'JC101034',
'JD521002',
'JZ511004',
'PA511228',
'AA111085',
'AA171006',
'AB181017',
'CD101082',
'AA131063',
'DH101424',
'DK101097',
'DK101569',
'DS201035',
'DU201101',
'31151021',
'36AA4050',
'52JB0231',
'DJ201176',
'39171519',
'03100338',
'05101018',
'AA101057',
'DD111018',
'DD111048',
'DG111008',
'DH111015',
'31101033',
'39103519',
'39108019',
'AA121336',
'DH101016',
'DH101050',
'DS101036',
'JB511019',
'JL401012',
'DD101349',
'DF101055',
'DH101520',
'JB401400',
'JC101038',
'JZ401403',
'36AA4032',
'36DS1004',
'36JZ0007',
'39029615',
'52DH1335',
'52DH1531',
'52PF1156',
'AA101569',
'DH111072',
'DH201080',
'DJ201132',
'DK101386',
'DM101139',
'DM101140',
'DS101072',
'DU101185',
'JA511006',
'JA531011',
'JE541051',
'03100335',
'03100619',
'06101252',
'06191089',
'19101003',
'20201029',
'24100308',
'24151258',
'28101110',
'36241010',
'36281008',
'36AA4025',
'36AB4001',
'36AN0013',
'36JZ0002',
'36PA0004',
'39104319',
'24151171',
'39201719',
'AA101499',
'36DD4008',
'36DJ4005',
'36JE0005',
'36JN0015',
'39219019',
'BH184000',
'DH101680',
'DJ181087',
'DL181080',
'31101314',
'36BA4002',
'52PD0150',
'AA101013',
'AA101077',
'AA101210',
'AA101593',
'AA101598',
'AA201185',
'AB101067',
'AZ351207',
'BA132171',
'PD121012',
'PD181222',
'SVA0004',
]

for number in numbers:
    payload = f'strPartNo_PAItemInq={number}&strFuncType=INVENTORYDATA&strPADealerCode_PAItemInq=AC2011063676&STR_' \
              f'FORM_ID=00602&STR_FUNCTION_ID=IQ&STR_PREMIS=KGL&STR_INSTANT=DLR&STR_APP_ID=00011'

    response = requests.request("POST", url, headers=headers, data=payload)
    if response.status_code == 200:
        data = json.loads(response.text)['DATA']

        if 'dblSellingPrice' in data:
            print(data['dblSellingPrice'])
        else:
            print(f'{number} - Not Found.')
    else:
        print(f'{number} - Not Found.')
